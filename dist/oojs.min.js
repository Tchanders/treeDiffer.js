/*! OOjs v7.0.1 | https://oojs.mit-license.org */
!function(t){"use strict";var s={},c=s.hasOwnProperty,a=Array.prototype.slice,e=s.toString;function r(t,e,r){for(var i=new Set(e),n=[],o=0;o<t.length;o++)i.has(t[o])===r&&n.push(t[o]);return n}function o(t,e){if("string"==typeof t){if(null==e)throw new Error('Method name "'+t+'" has no context.');if("function"!=typeof e[t])throw new Error('Property "'+t+'" is not a function')}else if("function"!=typeof t)throw new Error("Invalid callback. Function or method name expected.")}function n(t,e,r){t=c.call(t.bindings,e)?t.bindings[e]:t.bindings[e]=[];t.push(r)}function h(t,e){return void 0===e||e<0||e>=t.length?t.length:e}s.initClass=function(t){t.static=t.static||{}},s.inheritClass=function(t,e){if(!e)throw new Error("inheritClass: Origin is not a function (actually "+e+")");if(t.prototype instanceof e)throw new Error("inheritClass: Target already inherits from origin");var r=t.prototype.constructor;t.super=t.parent=e,t.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s.initClass(e),t.static=Object.create(e.static)},s.mixinClass=function(t,e){if(!e)throw new Error("mixinClass: Origin is not a function (actually "+e+")");for(var r in e.prototype)"constructor"!==r&&c.call(e.prototype,r)&&(t.prototype[r]=e.prototype[r]);if(s.initClass(t),e.static)for(r in e.static)c.call(e.static,r)&&(t.static[r]=e.static[r]);else s.initClass(e)},s.isSubclass=function(t,e){return t===e||t.prototype instanceof e},s.getProp=function(t){for(var e=t,r=1;r<arguments.length;r++){if(null==e)return;e=e[arguments[r]]}return e},s.setProp=function(t){if(!(Object(t)!==t||arguments.length<2)){for(var e=t,r=1;r<arguments.length-2;r++){if(void 0===e[arguments[r]]&&(e[arguments[r]]={}),Object(e[arguments[r]])!==e[arguments[r]])return;e=e[arguments[r]]}e[arguments[arguments.length-2]]=arguments[arguments.length-1]}},s.deleteProp=function(t){if(!(Object(t)!==t||arguments.length<2)){for(var e=t,r=[e],i=1;i<arguments.length-1;i++){if(void 0===e[arguments[i]]||Object(e[arguments[i]])!==e[arguments[i]])return;e=e[arguments[i]],r.push(e)}for(delete e[arguments[i]];1<r.length&&(e=r.pop())&&s.isPlainObject(e)&&!Object.keys(e).length;)delete r[r.length-1][arguments[r.length]]}},s.cloneObject=function(t){var e,r=Object.create(t.constructor.prototype);for(e in t)c.call(t,e)&&(r[e]=t[e]);return r},s.getObjectValues=function(t){if(t!==Object(t))throw new TypeError("Called on non-object");var e,r=[];for(e in t)c.call(t,e)&&(r[r.length]=t[e]);return r},s.binarySearch=function(t,e,r){for(var i=0,n=t.length;i<n;){var o=i+n>>1,s=e(t[o]);if(s<0)n=o;else{if(!(0<s))return o;i=1+o}}return r?n:null},s.compare=function(t,e,r){if(t===e)return!0;if(e=e||{},"number"==typeof(t=t||{}).nodeType&&"function"==typeof t.isEqualNode)return t.isEqualNode(e);for(var i in t)if(c.call(t,i)&&void 0!==t[i]&&t[i]!==e[i]){var n=t[i],i=e[i],o=typeof n;if(o!=typeof i||("string"==o||"number"==o||"boolean"==o)&&n!==i||n===Object(n)&&!s.compare(n,i,!0))return!1}return!!r||s.compare(e,t,!0)},s.copy=function(t,e,r){var i;if(!r||void 0===(i=r(t))){if(Array.isArray(t))i=new Array(t.length);else{if(t&&"function"==typeof t.clone)return e?e(t.clone()):t.clone();if(t&&"function"==typeof t.cloneNode)return e?e(t.cloneNode(!0)):t.cloneNode(!0);if(!s.isPlainObject(t))return e?e(t):t;i={}}for(var n in t)i[n]=s.copy(t[n],e,r)}return i},s.getHash=function(t){return JSON.stringify(t,s.getHash.keySortReplacer)},s.getHash.keySortReplacer=function(t,e){if(e&&"function"==typeof e.getHashObject&&(e=e.getHashObject()),Array.isArray(e)||Object(e)!==e)return e;for(var r={},i=Object.keys(e).sort(),n=0,o=i.length;n<o;n++)r[i[n]]=e[i[n]];return r},s.unique=function(t){return Array.from(new Set(t))},s.simpleArrayUnion=function(t,...e){for(var r=new Set(t),i=0;i<e.length;i++)for(var n=e[i],o=0;o<n.length;o++)r.add(n[o]);return Array.from(r)},s.simpleArrayIntersection=function(t,e){return r(t,e,!0)},s.simpleArrayDifference=function(t,e){return r(t,e,!1)},s.isPlainObject=function(t){return!(!t||"[object Object]"!==e.call(t))&&(!(t=Object.getPrototypeOf(t))||c.call(t,"isPrototypeOf"))},s.EventEmitter=function(){this.bindings={}},s.initClass(s.EventEmitter),s.EventEmitter.prototype.on=function(t,e,r,i){return o(e,i),n(this,t,{method:e,args:r,context:arguments.length<4?null:i,once:!1}),this},s.EventEmitter.prototype.once=function(t,e){return o(e),n(this,t,{method:e,args:void 0,context:null,once:!0}),this},s.EventEmitter.prototype.off=function(t,e,r){if(1===arguments.length)delete this.bindings[t];else if(o(e,r),c.call(this.bindings,t)&&this.bindings[t].length){arguments.length<3&&(r=null);for(var i=this.bindings[t],n=i.length;n--;)i[n].method===e&&i[n].context===r&&i.splice(n,1);0===i.length&&delete this.bindings[t]}return this},s.EventEmitter.prototype.emit=function(t){if(!c.call(this.bindings,t))return!1;for(var e=this.bindings[t].slice(),r=a.call(arguments,1),i=0;i<e.length;i++){var n=e[i],o="string"==typeof n.method?n.context[n.method]:n.method;n.once&&this.off(t,o);try{o.apply(n.context,n.args?n.args.concat(r):r)}catch(t){setTimeout(function(t){throw t}.bind(null,t))}}return!0},s.EventEmitter.prototype.emitThrow=function(t){if(!c.call(this.bindings,t))return!1;for(var e,r=this.bindings[t].slice(),i=a.call(arguments,1),n=0;n<r.length;n++){var o=r[n],s="string"==typeof o.method?o.context[o.method]:o.method;o.once&&this.off(t,s);try{s.apply(o.context,o.args?o.args.concat(i):i)}catch(t){void 0===e?e=t:setTimeout(function(t){throw t}.bind(null,t))}}if(void 0!==e)throw e;return!0},s.EventEmitter.prototype.connect=function(t,e){for(var r in e){var i,n=e[r];Array.isArray(n)?(i=n.slice(1),n=n[0]):i=[],this.on(r,n,i,t)}return this},s.EventEmitter.prototype.disconnect=function(t,e){if(e)for(var r in e){var i=e[r];Array.isArray(i)&&(i=i[0]),this.off(r,i,t)}else for(r in this.bindings)for(var n=this.bindings[r],o=n.length;o--;)n[o]&&n[o].context===t&&this.off(r,n[o].method,t);return this},s.EmitterList=function(){this.items=[],this.aggregateItemEvents={}},s.initClass(s.EmitterList),s.EmitterList.prototype.getItems=function(){return this.items.slice(0)},s.EmitterList.prototype.getItemIndex=function(t){return this.items.indexOf(t)},s.EmitterList.prototype.getItemCount=function(){return this.items.length},s.EmitterList.prototype.isEmpty=function(){return!this.items.length},s.EmitterList.prototype.aggregate=function(t){var e,r;for(r in t){var i,n,o,s=t[r];if(Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,r)){if(s)throw new Error("Duplicate item event aggregation for "+r);for(e=0;e<this.items.length;e++)(n=this.items[e]).connect&&n.disconnect&&((i={})[r]=["emit",this.aggregateItemEvents[r],n],n.disconnect(this,i));delete this.aggregateItemEvents[r]}if(s)for(this.aggregateItemEvents[r]=s,e=0;e<this.items.length;e++)(n=this.items[e]).connect&&n.disconnect&&((o={})[r]=["emit",s,n],n.connect(this,o))}},s.EmitterList.prototype.addItems=function(t,e){if(0!==(t=Array.isArray(t)?t:[t]).length){e=h(this.items,e);for(var r=0;r<t.length;r++){var i=this.items.indexOf(t[r]);-1!==i?(e=this.moveItem(t[r],e),this.emit("move",t[r],e,i)):(e=this.insertItem(t[r],e),this.emit("add",t[r],e)),e++}}return this},s.EmitterList.prototype.moveItem=function(t,e){var r=this.items.indexOf(t);if(-1===r)throw new Error("Item cannot be moved, because it is not in the list.");return e=h(this.items,e),this.items.splice(r,1),r<e&&e--,this.items.splice(e,0,t),e},s.EmitterList.prototype.insertItem=function(t,e){if(null===t||"object"!=typeof t)throw new Error("Expected object, but item is "+typeof t);if(t.connect&&t.disconnect){var r,i={};for(r in this.aggregateItemEvents)i[r]=["emit",this.aggregateItemEvents[r],t];t.connect(this,i)}return e=h(this.items,e),this.items.splice(e,0,t),e},s.EmitterList.prototype.removeItems=function(t){if(0!==(t=Array.isArray(t)?t:[t]).length)for(var e=0;e<t.length;e++){var r=t[e],i=this.items.indexOf(r);-1!==i&&(r.connect&&r.disconnect&&r.disconnect(this),this.items.splice(i,1),this.emit("remove",r,i))}return this},s.EmitterList.prototype.clearItems=function(){for(var t=this.items.splice(0,this.items.length),e=0;e<t.length;e++){var r=t[e];r.connect&&r.disconnect&&r.disconnect(this)}return this.emit("clear"),this},s.SortedEmitterList=function(t){s.EmitterList.call(this),this.sortingCallback=t,this.aggregate({sortChange:"itemSortChange"}),this.connect(this,{itemSortChange:"onItemSortChange"})},s.mixinClass(s.SortedEmitterList,s.EmitterList),s.SortedEmitterList.prototype.onItemSortChange=function(t){this.removeItems(t),this.addItems(t)},s.SortedEmitterList.prototype.setSortingCallback=function(t){var e=this.getItems();this.sortingCallback=t,this.clearItems(),this.addItems(e)},s.SortedEmitterList.prototype.addItems=function(t){if(0!==(t=Array.isArray(t)?t:[t]).length)for(var e=0;e<t.length;e++){var r=this.findInsertionIndex(t[e]),r=(r<=this.items.length&&this.items[r]&&0===this.sortingCallback(this.items[r],t[e])&&this.removeItems(this.items[r]),this.insertItem(t[e],r));this.emit("add",t[e],r)}return this},s.SortedEmitterList.prototype.findInsertionIndex=function(e){var r=this;return s.binarySearch(this.items,function(t){return r.sortingCallback(e,t)},!0)},s.Registry=function(){s.EventEmitter.call(this),this.registry={}},s.mixinClass(s.Registry,s.EventEmitter),s.Registry.prototype.register=function(t,e){if("string"==typeof t)this.registry[t]=e,this.emit("register",t,e);else{if(!Array.isArray(t))throw new Error("Name must be a string or array, cannot be a "+typeof t);for(var r=0,i=t.length;r<i;r++)this.register(t[r],e)}},s.Registry.prototype.unregister=function(t){if("string"==typeof t){var e=this.lookup(t);void 0!==e&&(delete this.registry[t],this.emit("unregister",t,e))}else{if(!Array.isArray(t))throw new Error("Name must be a string or array, cannot be a "+typeof t);for(var r=0,i=t.length;r<i;r++)this.unregister(t[r])}},s.Registry.prototype.lookup=function(t){if(c.call(this.registry,t))return this.registry[t]},s.Factory=function(){s.Factory.super.call(this)},s.inheritClass(s.Factory,s.Registry),s.Factory.prototype.register=function(t,e){if("function"!=typeof t)throw new Error("constructor must be a function, got "+typeof t);if("string"!=typeof(e=arguments.length<=1?t.key||t.static&&t.static.name:e)||""===e)throw new Error("key must be a non-empty string");s.Factory.super.prototype.register.call(this,e,t)},s.Factory.prototype.unregister=function(t){if("string"!=typeof(t="function"==typeof t?t.key||t.static&&t.static.name:t)||""===t)throw new Error("key must be a non-empty string");s.Factory.super.prototype.unregister.call(this,t)},s.Factory.prototype.create=function(t,...e){var r=this.lookup(t);if(r)return new r(...e);throw new Error("No class registered by that key: "+t)},"undefined"!=typeof module&&module.exports?module.exports=s:t.OO=s}(this);
//# sourceMappingURL=oojs.min.js.map